@model WebApplication1.Models.Prodotti

@{
    ViewBag.Title = Model.NomeProdotto;
}

<!-- Container for demo purpose -->
<div class="container mt-5 pt-5">

    <!--Section: Design Block-->
    <section class="mb-5">
        <div class="row">
            <div class="col-lg-5 pe-lg-4 mb-5 mb-lg-0">
                <div id="carouselExampleIndicators" class="carousel slide" data-mdb-ride="carousel">
                    <div class="carousel-inner shadow-4-soft rounded-5">
                        @Html.HiddenFor(m => m.IdProdotti, new { htmlAttributes = new { @class = "form-control", @id = "IdProdotti" } })

                        <div class="carousel-item active">
                            <img src="~/Content/img/@Model.FotoCopertina" class="d-block w-100" style="height:70vh;object-fit:cover" alt="" />
                        </div>
                        <div class="carousel-item">
                            <img src="~/Content/img/@Model.Foto1" class="d-block w-100" style="height:70vh;object-fit:cover" alt="" />
                        </div>
                        <div class="carousel-item">
                            <img src="~/Content/img/@Model.Foto2" class="d-block w-100" style="height:70vh;object-fit:cover" alt="" />
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-mdb-target="#carouselExampleIndicators" data-mdb-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-mdb-target="#carouselExampleIndicators" data-mdb-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
            <div class="col-lg-7 ps-lg-4 d-flex flex-column justify-content-between">
                <h5>@Model.NomeProdotto</h5>
                <div class="d-flex">

                    @if (Model.MediaValutazione == null)
                    {

                    }
                    else
                    {

                        <ul class="list-unstyled d-flex mb-0">
                            @for (int i = 0; i < Model.MediaValutazione.Value; i++)
                            {



                                <li>
                                    <i class="fas fa-star fa-sm text-warning"></i>
                                </li>

                            }
                            @if (Model.MediaValutazione < 1)
                            {

                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                            }
                            else if (Model.MediaValutazione < 2)
                            {
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>

                            }
                            else if (Model.MediaValutazione < 3)
                            {
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>


                            }
                            else if (Model.MediaValutazione < 4)
                            {
                                <li>
                                    <i class="far fa-star fa-sm text-warning"></i>
                                </li>



                            }





                        </ul>
                        <div>

                            <p>(@Model.TotRecensioni)</p>

                        </div>
                    }
                </div>

                <p class="my-0">@Model.DescrizioneBreve</p>
                <p><span class="lead fw-normal">@Model.Prezzo.ToString("C2")</span></p>
                <div class="w-100 my-2">
                    @if (User.IsInRole("Admin"))
                    {

                    }
                    else
                    {

                        if (Model.Disponibile != false)
                        {

                            <a href="@Url.Action("AggiungiAlCarrello", "Ordini", new {id=Model.IdProdotti})" class="btn btn-dark me-2 w-100">Aggiungi al carrello</a>
                        }
                        else
                        {
                            <a href="@Url.Action("AggiungiAlCarrello", "Ordini", new {id=Model.IdProdotti})" class="btn btn-dark me-2 w-100 disabled">Non Disponibile</a>

                        }
                    }
                </div>
                <div class="row">
                    <div class="col-12 mb-2">
                        <em class="text-lowercase"> @Model.Descrizione</em>
                    </div>
                    @if (Model.IdCategoria == 1)
                    {

                        <div class="d-flex mt-4">
                            <div style="width:50px" class="me-1">
                                <!--?xml version="1.0" encoding="utf-8"?-->
                                <!-- Generator: Adobe Illustrator 25.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                                <svg version="1.1" id="Livello_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" style="enable-background:new 0 0 1000 1000;" xml:space="preserve">
<g>
                                <path d="M357.2,490.1c-8.8-2.9-10.6-5.4-10.6-14.4c-0.1-17.6,0.1-35.2-0.2-52.8c-0.1-7.3,2-12.5,10.1-14.3c0-6.6,0-13.2,0-19.7
		c0-37.5,16.3-65.7,48.7-84.5c2.3-1.4,4.5-3.1,7.1-4c12.5-4.3,16-12.7,14.8-25.6c-2-23.3,7-42.3,25.9-56.3
		c8.6-6.4,18.4-10.2,28.9-10.9c10.2-0.7,20.5-1,30.7-0.1c30.1,2.8,53.4,27.6,55.1,57.8c0.3,6.4,0.5,12.8,0.1,19.1
		c-0.3,5.3,1.4,8.2,6.1,10.9c10.3,5.7,20.9,11.3,30.1,18.5c23.4,18.3,34.3,43.1,34.6,72.7c0.1,6.9,0.1,13.9,0.1,20.8
		c12.5,3.7,13.1,4.5,13.1,17.8c0,15.9,0.1,31.7,0.1,47.6c0,12.7-1.1,14.2-13.6,16.9c-0.1,2.3-0.3,4.8-0.5,7.3
		c-2.5,53.5-5.9,107-14.6,160c-8.1,49.4-20.1,97.8-34.1,145.7c-1.8,6-5.6,8.9-11.9,8.9c-52.6,0.1-105.2,0.2-157.8,0.3
		c-7.4,0-9.9-2.3-12.2-9.9c-30-96.2-45.6-194.7-49.2-295.3C358,501.1,357.5,495.6,357.2,490.1 M377.7,489.6c0,1.9-0.1,3.5,0,5
		c1.3,21.6,2.4,43.2,3.9,64.8C387,637,401.8,712.8,424,787.3c0.9,2.9,1.9,4.6,5.4,4.6c46-0.2,92-0.3,138-0.3c3.1,0,4.5-1,5.2-4
		c8.8-36.5,18.6-72.7,26.3-109.4c12.8-61.1,16.3-123.4,19-185.6c0-1.1-0.2-2.1-0.3-3.5C537.5,489.2,457.7,489.4,377.7,489.6
		 M618.8,408.4c-0.3-11,0.1-21.6-1.1-32.1c-2.3-20.6-12.3-37.3-29.4-49.1c-9.1-6.2-18.8-11.4-28.5-16.7c-2.9-1.6-6.5-2.6-9.8-2.6
		c-27.4-0.1-54.9,1.1-82.3-0.3c-20.1-1-37.7,3.2-53.6,15c-0.2,0.1-0.3,0.2-0.5,0.3c-35.2,21.3-39.7,51.5-36.1,86
		C457.7,408.7,537.8,408.6,618.8,408.4 M366.7,469.4c88.7-0.2,176.7-0.4,265.1-0.6c0-13.7-0.1-26.8-0.1-40.3
		c-88.4,0.2-176.4,0.4-265,0.6C366.7,442.6,366.7,455.6,366.7,469.4 M548,287.6c-0.3-8.7-0.2-16.6-1-24.4
		c-1.9-18.1-17.3-33.6-35.4-35.2c-9.2-0.8-18.5-0.5-27.7-0.1c-9,0.4-16.7,4.5-23.3,10.4c-15.2,13.5-14.2,31.3-13.4,49.5
		C480.8,287.7,513.9,287.6,548,287.6"></path>
                                <path d="M498.3,990.5c-65.1,0-128.3-13.1-187.8-38.8c-57.4-24.9-109-60.4-153.3-105.8c-44.3-45.3-79.1-98.1-103.3-156.8
		c-25.1-60.8-37.9-125.4-37.9-192s12.7-131.1,37.9-192c24.3-58.7,59.1-111.5,103.3-156.8c44.3-45.3,95.9-80.9,153.3-105.8
		C369.9,17,433.1,3.9,498.3,3.9S626.6,17,686.1,42.7c57.4,24.9,109,60.4,153.3,105.8c44.3,45.3,79.1,98.1,103.3,156.8
		c25.1,60.8,37.9,125.4,37.9,192s-12.7,131.1-37.9,192c-24.3,58.7-59.1,111.5-103.3,156.8c-44.3,45.3-95.9,80.9-153.3,105.8
		C626.6,977.4,563.4,990.5,498.3,990.5 M498.3,20.9c-62.8,0-123.7,12.6-181.1,37.4c-55.4,24-105.2,58.3-147.9,102
		c-42.8,43.7-76.3,94.7-99.8,151.4c-24.3,58.7-36.6,121.1-36.6,185.5c0,64.3,12.3,126.7,36.6,185.5c23.5,56.7,57,107.7,99.8,151.4
		c42.7,43.7,92.5,78.1,147.9,102c57.4,24.8,118.3,37.4,181.1,37.4c62.8,0,123.7-12.6,181.1-37.4c55.4-24,105.2-58.3,147.9-102
		c42.8-43.7,76.3-94.7,99.8-151.4c24.3-58.7,36.6-121.1,36.6-185.5s-12.3-126.7-36.6-185.5c-23.5-56.7-57-107.7-99.8-151.4
		c-42.7-43.7-92.5-78.1-147.9-102C622,33.5,561.1,20.9,498.3,20.9"></path>
</g>
</svg>

                            </div>
                            <div class="d-flex flex-column">

                                <p class="fw-bold mb-0">Ingredienti</p>

                                <p class="text-lowercase mb-4"> @Model.Ingredienti</p>
                            </div>
                        </div>

                        <div class="d-flex">
                            <div style="width:50px" class="me-1">
                                <!--?xml version="1.0" encoding="utf-8"?-->
                                <!-- Generator: Adobe Illustrator 25.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                                <svg version="1.1" id="Livello_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" style="enable-background:new 0 0 1000 1000;" xml:space="preserve">
<g>
                                <path d="M318.6,403.2c-14.7,10.8-67,55.1-81.9,65.5c-1.8,1.3-3.7,2.2-5.5,4.7c8,0.6,15.9,1.4,23.9,1.7c48.9,1.8,97.6-1.5,146-11
		c22.4-4.4,43.2,2.9,63.8,12.1c4.1,1.8,8.2,4,12.2,6.2c14.2,8,28,6.9,42.5,0.3c16-7.3,32.3-14.8,49-17.9c13.9-2.6,28.8,0,43,2.3
		c50.9,8.3,101.9,10.4,153,6.4c0.1,0,0.2-0.3,0.3-0.5c-0.1-0.4-0.2-1.1-0.5-1.2c-36.6-20.8-68.3-50.4-99.7-80.7
		c-21.9-21.1-44.6-40.8-70.3-54.5c-13.5-7.2-27.4-12.5-42.6-8.6c-10.3,2.6-18.4,9.4-25.4,18.6c-3.7,4.8-6.9,10.2-10.6,15.2
		c-10.2,14-26,13.3-36.1-0.9c-6.4-9-12.8-18.5-20.6-25.4c-13-11.5-27.9-10.6-42.8-5.1c-22.1,8.2-41.5,23-60.2,39
		c-11.3,9.6-22.2,20-33.3,30.1c-1.5,1.4-3,2.9-4.6,4c-4.6,3.2-8.9,2.9-12.4-2.1c-3.4-4.7-3-11.2,1.3-15.7c6-6.3,12.4-12.2,18.8-18
		c23.2-21,46.8-41.4,74-54.5c19.7-9.5,39.9-14.1,60.4-3.3c11.4,6,20.6,15.6,28.3,27.4c10,15.5,9.2,15.9,19.7-0.1
		c11.4-17.3,25.5-29.5,44-32.6c16-2.7,31.3,1.8,45.9,9.2c28.7,14.5,53.8,36.3,78.2,59.3c25.8,24.4,51.4,49.2,80.4,68.1
		c17.4,11.4,35.4,20.8,54.6,26.9c3.3,1,6,4.8,9,7.4v7.7c-2.2,2.7-4.2,5.5-6.6,7.9c-22.2,22.1-44.5,44-66.8,66
		c-1.1,1.1-2.1,2.5-3.3,3.6c-4.8,4.7-33.1,37.1-36.8,32.5c-3.9-4.8,21.2-42.3,25.9-47.7c8.8-10.2,16.1-21.6,25.2-31.4
		c5.1-5.5,10.6-10.6,16.9-16.9c-6.5,0-11.6-0.3-16.7,0.1c-55.5,4.3-110.6,0.1-165.4-10.4c-18-3.4-34.9,2.4-51.6,9.8
		c-6.7,3-13.2,6.5-19.8,9.7c-15.3,7.4-30.6,7.4-45.9,0.1c-8.6-4.1-17.1-8.4-25.7-12.4c-20.4-9.5-41.2-8.6-62.5-4.6
		c-48.6,9.3-97.6,11.3-146.7,7.9c-5.7-0.4-11.5-0.1-18.1-0.1c1.9,2.1,3.3,3.9,4.8,5.4c25.2,24,47.8,51.2,68.1,81.3
		c16.9,24.9,36.4,45.8,61.7,57.4c19,8.7,38.8,10.9,58.7,10.2c25.8-1,51.5-3.8,77.2-4.6c15.4-0.5,30.9,2,46.4,2.4
		c24.3,0.5,48.7,2.4,72.8-0.1c32.4-3.2,58.1-24.2,79.9-52.8c2.6-3.4,56.3-71.7,59-74.9c4.3-5-41.6,59.6-37.8,64
		c3.5,4.2,48.2-44.6,44.6-39.5c-19.6,18.6-77.6,97-99.4,110.2c-24.9,15.1-51.6,19.1-78.8,18.1c-25.3-0.9-50.6-3.8-76-4.5
		c-15.4-0.4-30.9,1.4-46.4,2.5c-25.5,1.7-51,4.1-76.6-0.2c-33.8-5.7-61.7-24.7-85.3-54c-6.7-8.4-13.1-17.3-19.2-26.3
		c-24.2-35.8-53-65.3-83.6-92.3c-3.9-3.4-8.4-6.2-11.6-10.4c-2.3-2.9-4.6-8.1-4-11.6c0.6-3.5,4.2-8.1,7.2-9
		c20-6.2,38.8-16.1,56.9-28.1c8.4-5.6,28.5-23,36.8-29c1.8-1.3,31.1-27.9,32.9-29.2"></path>
                                <path d="M498.3,990.5c-65.1,0-128.3-13.1-187.8-38.8c-57.4-24.9-109-60.4-153.3-105.8c-44.3-45.3-79.1-98.1-103.3-156.8
		c-25.1-60.8-37.9-125.4-37.9-192s12.7-131.1,37.9-192c24.3-58.7,59.1-111.5,103.3-156.8c44.3-45.3,95.9-80.9,153.3-105.8
		C369.9,17,433.1,3.9,498.3,3.9S626.6,17,686.1,42.7c57.4,24.9,109,60.4,153.3,105.8c44.3,45.3,79.1,98.1,103.3,156.8
		c25.1,60.8,37.9,125.4,37.9,192s-12.7,131.1-37.9,192c-24.3,58.7-59.1,111.5-103.3,156.8c-44.3,45.3-95.9,80.9-153.3,105.8
		C626.6,977.4,563.4,990.5,498.3,990.5 M498.3,20.9c-62.8,0-123.7,12.6-181.1,37.4c-55.4,24-105.2,58.3-147.9,102
		c-42.8,43.7-76.3,94.7-99.8,151.4c-24.3,58.7-36.6,121.1-36.6,185.5c0,64.3,12.3,126.7,36.6,185.5c23.5,56.7,57,107.7,99.8,151.4
		c42.7,43.7,92.5,78.1,147.9,102c57.4,24.8,118.3,37.4,181.1,37.4c62.8,0,123.7-12.6,181.1-37.4c55.4-24,105.2-58.3,147.9-102
		c42.8-43.7,76.3-94.7,99.8-151.4c24.3-58.7,36.6-121.1,36.6-185.5s-12.3-126.7-36.6-185.5c-23.5-56.7-57-107.7-99.8-151.4
		c-42.7-43.7-92.5-78.1-147.9-102C622,33.5,561.1,20.9,498.3,20.9"></path>
</g>
</svg>
                            </div>
                            <div class="d-flex flex-column">

                                <p class="fw-bold mb-0">Sapore</p>

                                <p class="text-lowercase mb-4"> @Model.Gusto</p>
                            </div>
                        </div>

                        <div class="d-flex">
                            <div style="width:50px" class="me-1">
                                <!--?xml version="1.0" encoding="utf-8"?-->
                                <!-- Generator: Adobe Illustrator 25.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                                <svg version="1.1" id="Livello_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" style="enable-background:new 0 0 1000 1000;" xml:space="preserve">
<g>
                                <path d="M659.6,587.5v7.9c0,34.7,0,69.4,0,104.1c0,25-14,38.8-39,38.9c-14,0-27.9,0.1-41.9,0c-8.9-0.1-14.1-4.4-13.8-11.2
		c0.2-6.6,5.1-10.4,13.8-10.5c14.5-0.1,28.9,0.1,43.4,0c11.1-0.1,15.7-4.8,15.9-15.9c0.1-6.5-0.1-13-0.1-19.5c0-0.4-0.4-0.8-0.7-1.7
		H362.6c0,9-0.4,17.6,0.1,26.2c0.4,6.2,4.8,9.8,11,10.7c2.4,0.4,4.8,0.2,7.2,0.2c50.1,0,100.2,0,150.3,0c2.4,0,4.8-0.1,7.2,0.2
		c5.8,0.8,9.3,4.4,9.6,10c0.4,5.7-2.9,9.6-8.5,11c-2.3,0.6-4.8,0.5-7.2,0.5c-51.1,0-102.1,0-153.2,0c-24.9,0-38.7-14-38.8-39.1
		c0-34.4,0-68.9,0-103.3c0-2.6,0-5.3,0-7.8c-10.4-2.5-20.6-4.2-30.3-7.4c-58.4-19.1-97-73.3-95.8-133.6
		c1.2-62.6,41.6-115.2,101.7-132.2c18.1-5.1,36.5-6.3,55.1-3.4c5.4,0.8,8.4-0.2,11.4-5.3c41.3-71.1,139.2-89.9,203.9-39.1
		c13.9,10.9,25.7,24,34.4,39.5c2.3,4.1,4.6,5.6,9.6,4.9c73.6-10.8,143.8,41.6,155.1,115.6c12.1,78.9-42,150-121.6,159.6
		C662.7,586.9,661.6,587.1,659.6,587.5 M637.9,657.1c0-22.4,0.1-44.1-0.2-65.7c0-1.6-3.2-4-5.3-4.6c-13.8-4.1-27.7-7.6-41.4-11.9
		c-5.3-1.7-7.9-6.2-6.8-12c0.9-5.1,4.3-8.3,9.4-8.5c3-0.1,6.2,0.8,9,2c21.5,8.7,43.7,11,66.6,7.2c51.8-8.6,94.7-57.4,96.2-109.9
		c1.7-57.9-38.9-108.8-96-119.4c-11.5-2.1-23.5-1.8-36-2.6c1.9,9,3.8,15.7,4.8,22.5c1,7.1,1.6,14.4,1.8,21.6
		c0.2,6.3-2.7,10.7-9.4,11.5c-6.3,0.8-10.7-2.7-11.8-9.8c-0.8-5.5-0.6-11.1-1.4-16.5c-9.7-65.2-69.1-107.3-129.6-99.9
		c-48.5,6-90.2,42.8-100,91c-1.7,8.4-1.9,17.2-3.3,25.7c-1,6.3-4.8,9.9-11.5,9.6c-5.9-0.3-9.7-4.5-9.8-11.2c0-5.5,0.2-11.1,1-16.6
		c1.3-8.7,3.2-17.3,5-26.3c-1.5-0.3-2.6-0.6-3.8-0.8c-76.9-7.4-140.3,60.5-127.6,136.7c8.5,50.8,56.5,93.3,108,95.9
		c18.1,0.9,35.5-1.7,52.3-8.5c9.8-4,15.9-2.5,18.6,4c2.9,6.9-0.3,12.7-10.8,16.1c-12.3,4-24.9,7.1-37.6,9.7c-4.9,1-6.3,2.5-6.3,7.3
		c0.2,19.3,0.1,38.5,0.1,57.8c0,1.8,0.4,3.7,0.6,5.3h49.7c0-10.4,0-20.3,0-30.1c0.1-9.1,4-14.1,10.8-14.2c6.9,0,10.8,5,10.9,14
		c0.1,10,0,20.1,0,30.4h51.6c0.4-0.8,0.7-1.3,0.7-1.7c0.1-8.7,0.2-17.3,0.2-26c0.1-11.7,3.6-16.9,11.2-16.7
		c7.4,0.2,10.5,5.1,10.5,16.5c0,9.3,0,18.6,0,27.8H561c0.1-1.9,0.3-3.3,0.3-4.7c0-9.6-0.1-19.3,0.1-28.9c0.1-6.1,3.6-9.9,9.7-10.6
		c5.9-0.7,10.6,3.1,11.6,9.4c0.5,3.1,0.3,6.2,0.3,9.4c0,8.5,0,17.1,0,25.7H637.9z"></path>
                                <path d="M498.3,990.5c-65.1,0-128.3-13.1-187.8-38.8c-57.4-24.9-109-60.4-153.3-105.8c-44.3-45.3-79.1-98.1-103.3-156.8
		c-25.1-60.8-37.9-125.4-37.9-192s12.7-131.1,37.9-192c24.3-58.7,59.1-111.5,103.3-156.8c44.3-45.3,95.9-80.9,153.3-105.8
		C369.9,17,433.1,3.9,498.3,3.9S626.6,17,686.1,42.7c57.4,24.9,109,60.4,153.3,105.8c44.3,45.3,79.1,98.1,103.3,156.8
		c25.1,60.8,37.9,125.4,37.9,192s-12.7,131.1-37.9,192c-24.3,58.7-59.1,111.5-103.3,156.8c-44.3,45.3-95.9,80.9-153.3,105.8
		C626.6,977.4,563.4,990.5,498.3,990.5 M498.3,20.9c-62.8,0-123.7,12.6-181.1,37.4c-55.4,24-105.2,58.3-147.9,102
		c-42.8,43.7-76.3,94.7-99.8,151.4c-24.3,58.7-36.6,121.1-36.6,185.5c0,64.3,12.3,126.7,36.6,185.5c23.5,56.7,57,107.7,99.8,151.4
		c42.7,43.7,92.5,78.1,147.9,102c57.4,24.8,118.3,37.4,181.1,37.4c62.8,0,123.7-12.6,181.1-37.4c55.4-24,105.2-58.3,147.9-102
		c42.8-43.7,76.3-94.7,99.8-151.4c24.3-58.7,36.6-121.1,36.6-185.5s-12.3-126.7-36.6-185.5c-23.5-56.7-57-107.7-99.8-151.4
		c-42.7-43.7-92.5-78.1-147.9-102C622,33.5,561.1,20.9,498.3,20.9"></path>
</g>
</svg>

                            </div>
                            <div class="d-flex flex-column">

                                <p class="fw-bold mb-0">Abbinamenti</p>

                                <p class="text-lowercase mb-0"> @Model.Abbinamenti</p>
                            </div>
                        </div>

                    }
                </div>
            </div>
        </div>
    </section>
    <!--Section: Design Block-->

</div>
<!-- Container for demo purpose -->

<section class="mt-5 py-5 container">
    <div class="row row-cols-3 d-flex justify-content-center">
        <div class="col-md-10 col-xl-8 text-center">
            <h3 class="my-5 py-3">Recensioni</h3>
        </div>
    </div>
    <div class="row row-cols-1 row-cols-md-2 justify-content-center">
        <div class="col">
            <div class="d-flex">

                @if (Model.MediaValutazione == null)
                {

                }
                else
                {

                    <ul class="list-unstyled d-flex mb-0">
                        @for (int i = 0; i < Model.MediaValutazione.Value; i++)
                        {



                            <li>
                                <i class="fas fa-star fa-sm text-warning"></i>
                            </li>

                        }
                        @if (Model.MediaValutazione < 1)
                        {

                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                        }
                        else if (Model.MediaValutazione < 2)
                        {
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>

                        }
                        else if (Model.MediaValutazione < 3)
                        {
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>


                        }
                        else if (Model.MediaValutazione < 4)
                        {
                            <li>
                                <i class="far fa-star fa-sm text-warning"></i>
                            </li>



                        }





                    </ul>
                    <div>

                        <p>(@Model.TotRecensioni)</p>

                    </div>
                }
            </div>

            <h4 class="mb-1">La tua opinione è importante</h4>
            <p class="font-12 ">Condividi la tua esperienza con altri acquirenti </p>
            <button class="w-100 btn btn-dark my-5" data-mdb-toggle="modal" data-mdb-target="#staticBackdrop1">Aggiungi recensione</button>

        </div>
    </div>
        <div class="row">
            @{

                Html.RenderAction("RecensioniProdotto", "Recensioni");
            }

        </div>
    <div>




        @if (User.IsInRole("Admin"))
        {

        }
        else
        {


            

            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop1" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
                <div class="modal-dialog d-flex justify-content-center">
                    <div class="modal-content w-100">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel1">Aggiungi recensione</h5>
                            <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <form>


                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            @Html.HiddenFor(m => m.IdProdotti)
                            <input type="hidden" name="DataCommento" />
                            <div class="modal-body p-4">
                                <!-- Email input -->
                                <div class="form-outline mb-4">
                                    <label for="Valutazione" class="form-label">Valutazione</label>
                                    <select class="form-select" id="Valutazione">

                                        <option value="0">Seleziona</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </div>

                                <!-- password input -->
                                <div class="form-outline mb-4">
                                    <textarea class="form-control border border-1" rows="5" id="Commento"></textarea>
                                    <label for="Commento" class="form-label ">Commento</label>

                                </div>

                                <!-- Submit button -->
                                @if (User.Identity.IsAuthenticated)
                                {



                                    <div class="form-group">
                                        <div class="col-md-offset-2 col-md-10">
                                            <button type="button" class="btn btn-dark" id="recensione">Invia Recensione</button>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <a href="@Url.Action("Login", "Account")" class="btn btn-dark">
                                        Accedi
                                    </a>
                                }
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        }
        <!-- Modal -->









    </div>
</section>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {



            console.log("kjfs")
            $("#recensione").click(function () {
                var IdProdotti = $("#IdProdotti").val()
                console.log(IdProdotti)
                var valutazione = $("#Valutazione").find("option:selected").val();
                console.log(valutazione)
                var commento = $("#Commento").val()
                console.log(commento)


                $.ajax({
                    method: 'GET',
                    url: "/Recensioni/CreaRecensione",
                    data: { id: IdProdotti, commento: commento, valutazione: valutazione },
                    success: function (data) {
                        console.log(data)
                        $(window.location).attr("href", `?id=${IdProdotti}`)

                    }
                })


            })





        })








    </script>
}